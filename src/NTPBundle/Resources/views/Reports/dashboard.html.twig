{% extends 'NTPBundle::base.html.twig' %}
{% block body %}
    <div class="row">
        <div class="col-md-2">
            {{ form_start(form) }}
            {{ form_errors(form) }}
            {{ form_row(form.planDate) }}
            {{ form_row(form.submit) }}
            {{ form_end(form) }}</div>
        <div class="col-md-10"></div>
    </div>
    {% if report %}            
        <br/>
        <div class="row">
            <div class="col-md-4">

                <table class="table table-bordered">
                    <tr>
                        <td>Total duty time </td>
                        <td>{{ report.dutyTime }}</td>
                    </tr>
                    <tr>
                        <td>Total runs</td>
                        <td>{{ report.runsCount }}</td>

                    </tr>
                    <tr>
                        <td>Driving distance km</td>
                        <td>{{ report.distanceKm }}</td>

                    </tr>
                    <tr>
                        <td>Empty distance km</td>
                        <td>{{ report.emptyDistKms}}</td>

                    </tr>
                    <tr>
                        <td>Time utilisation %</td>
                        <td>{{ report.timeUtil|round(2, 'floor')}}</td>
                    </tr>
                    <tr>
                        <td>Avarge duty time</td>
                        <td>{{ report.avgDutyTime }}</td>
                    </tr>
                    <tr>
                        <td>Avarge distance km</td>
                        <td>{{ report.avgDistance|round }}</td>
                    </tr>
                    <tr>
                        <td>Avarge empty distance km</td>
                        <td>{{ report.avgEmptyDist|round }}</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-8">
                <div id="bar-example" style="height: 250px;"></div>

            </div>
        </div>
    {% endif %}
{% endblock %}
{% block documentReady %}
    $('#report_planDate').submit(function(e) {

    var url = $(this).attr("action");

    $.ajax({
        type: "POST",
        url: "{{ path('dashboard_report') }}", 
        data: $(this).serialize(),
        dataType: "html",
        success: function(msg){

            alert("Success!");

        }
    });

    return false;

});
    
    
    
    Morris.Bar({
    element: 'bar-example',
    hideHover: 'always',
    data: {{ report.graph | raw }},
    xkey: 'y',
    ykeys: ['a'],
    labels: ['Series A']
    });
{% endblock documentReady %}
